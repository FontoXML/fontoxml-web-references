ui-modal(
	id="web-reference-modal"
	ng-keyup="$event.keyCode === 13 && insertUrlReferenceForm.$valid && apply()")
	ui-modal-header(
		title="{{templateData.operationData.modalTitle}}"
		subtitle="{{templateData.operationData.modalSubtitle || ''}}"
		icon="globe")

	ui-modal-body
		.alert
			| Enter the web address for this link.

		form.form-horizontal(novalidate name="insertUrlReferenceForm")
			ui-region-root-row
				ui-region-column(size="fixed")
					label.control-label(for="web-reference-modal--url")
						| Web address

				ui-region-column.has-feedback(
					ng-class="{ \
						'has-success': insertUrlReferenceForm.url.$valid,\
						'has-warning': insertUrlReferenceForm.url.$invalid \
					}")
					input.form-control(
						id="web-reference-modal--url"
						name="url"
						type="text"
						ng-model="templateData.reference.target"
						ng-blur="onBlur()"
						ng-paste="onPaste()"
						ng-pattern="templateData.urlPattern"
						required)

					.icon.form-control-feedback(
						ng-class="{ \
							'icon-warning': insertUrlReferenceForm.url.$invalid, \
							'icon-check': insertUrlReferenceForm.url.$valid && insertUrlReferenceForm.url.$dirty && templateData.reference.target != '' \
						}")

	ui-modal-footer
		ui-button-bar
			ui-button-bar-region
				ui-button(
					type="default"
					label="Cancel"
					click="cancel()"
					enabled="{{!templateData.busy}}"
				)

			//- @NOTICE: This code should be removed as soon as there is a mechanism to give ui-buttons a "busy" state of
			//-          some sort. See also userstory FONTOXML-661. Also the ng-if for the next button may be deleted then.
			ui-button-bar-region(ng-if='templateData.busy')
				span Please wait while your link is being resolved
				ui-button(
					type="primary"
					icon="spinner"
					label="{{templateData.primaryButtonLabel}}"
					click="apply()"
					enabled="{{false}}")
			//- End of temporary code

			ui-button-bar-region(ng-if='!templateData.busy')
				ui-button(
					type="primary"
					label="{{templateData.operationData.modalPrimaryButtonLabel || 'Insert'}}"
					click="apply()"
					enabled="{{insertUrlReferenceForm.$valid}}")
